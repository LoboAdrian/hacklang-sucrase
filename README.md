# hacklang-sucrose

An actual working implementation of [hacklang](https://github.com/hackclub/hacklang). This repository is a minimal-change adaptation of [Sucrase](https://github.com/alangpierce/sucrase)

## Usage

## Contributing

### Setup

Make sure you install Yarn

```sh
git clone https://github.com/eankeen/hacklang-sucrose
cd hacklang-sucrase

yarn i
yarn i -D tslib
yarn generate
yarn build
```

### Adding Your Keyword

For reference, I've already converted `var` -> `rice`, `const` -> `yuto`, `class` -> `aditya`, and `throw` -> carrot.

1. Edit keyword entry in `KEYWORDS` variable in `generator/generateReadWordTree.ts`

2. Add if statement for your new keyword in the second loop over `ALL_KEYWORDS` (starts around line 130) in `generator/generateReadWordTree.ts`
- This is done because the property (ex. `_var`) used to access the real name of the token (ex. `rice`). Is autogenerated from the changed token we specify. We want to make the accessor stay as `_var` (instead of changing to `_rice`) so we don't have to refactor the  rest of the codebase

3. Edit `KeywordTokenType` instantiation for your keyword in `generator/generateTokenTypes.ts`

4. Generate the proper tokens from your changes

```sh
yarn generate
```

5. Build project
- The build pipeline is different compared to Sucrose because the multi-step self-build check to ensure compiler output integrity has been removed
```sh
yarn build
```

6. Test your keyword :)

```sh
node examples/sucrase-cli/input.js
```

7. Commit changes and make a PR :P

Note that although the setup for above should work for most of the keywords, it may not work for some, such as `=`, `super()`, `constructor()` and possibly `this`. Some may require a custom transformation under `src/parser/transformer/` (I previously got `constructor()` to work this way, but those modifications have been lost)
